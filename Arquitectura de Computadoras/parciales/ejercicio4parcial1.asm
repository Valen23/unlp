EOI EQU 20H
INT1 EQU 25H
CONT EQU 10H
COMP EQU 11H
ID_TIMER EQU 15
IMR EQU 21H
PA EQU 30H
CA EQU 32H

ORG 1000H
MSJ DB "HOLA"
FIN DW ?

ORG 60
IP_CLK DW SUBR_CLK

ORG 3000H
SUBR_CLK:
MOV AL, 0FFH
OUT INT1, AL
MOV DH, 1
MOV AL, EOI
OUT EOI, AL
IRET

ORG 2000H
CLI
MOV AL, 0
OUT CA, AL
MOV AL, ID_TIMER
OUT INT1, AL
MOV AL, 30
OUT COMP, AL
MOV AL, 0
OUT CONT, AL
MOV AL, 0FDH
MOV DH, 0
MOV BX, OFFSET MSJ
STI
LOOP:
MOV AL, [BX]
OUT PA, AL
MOV AL, 255
OUT PA, AL
INC BX
CMP BX, FIN
JZ FINALIZAR
CMP DH, 1
JZ FINALIZAR
JMP LOOP
FINALIZAR: INT 0
END
